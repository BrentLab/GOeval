<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="GOeval">
<title>GOeval • GOeval</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="GOeval">
<meta property="og:description" content="GOeval">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">GOeval</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/GOeval.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>GOeval</h1>
            
      
      
      <div class="d-none name"><code>GOeval.Rmd</code></div>
    </div>

    
    
<p>First, install and load this package. It is easiest to use either the
“devtools” or “remotes” package to do so. “remotes” is a smaller
package, so it might be the better option if you do not want to install
all of “devtools.”</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"westbrooktm/GOeval"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span>
<span><span class="co"># OR</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"westbrooktm/GOeval"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://westbrooktm.github.io/GOeval/">"GOeval"</a></span><span class="op">)</span></span></code></pre></div>
<p>Now that the package is loaded, we need a network as a tab-separated
.tsv file where the first column is the source nodes, the second column
is the target nodes, and (if using subset_network) the third column is
the edge scores. All genes should be written as their Ensembl gene
ID.</p>
<p>To run the following examples, access the example data stored in
“vignette_data.tar.gz” and extract it into a local folder.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"GOeval"</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"vignette_data.tar.gz"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># wherever you want to store the example data</span></span>
<span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="st">"GOeval_data"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/untar.html" class="external-link">untar</a></span><span class="op">(</span><span class="va">data_path</span>, exdir <span class="op">=</span> <span class="va">data_dir</span><span class="op">)</span></span></code></pre></div>
<p>Basic evaluation:</p>
<p>Here are the required arguments to run the evaluate function on the
“small_np3.tsv” network, which includes 10 transcription factors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># path to a network in proper format</span></span>
<span><span class="va">network_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"small_np3.tsv"</span><span class="op">)</span></span>
<span><span class="co"># path to a .txt file with one column that includes all the genes</span></span>
<span><span class="co">#   that may appear in the network</span></span>
<span><span class="va">reference_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"h1_k562_overlap_universe.txt"</span><span class="op">)</span></span>
<span><span class="co"># wherever you want to store the generated output</span></span>
<span><span class="va">out_dir</span> <span class="op">&lt;-</span> <span class="st">"GOeval_output"</span></span>
<span><span class="co"># a short name for the network without any spaces</span></span>
<span><span class="va">network_name</span> <span class="op">&lt;-</span> <span class="st">"np3"</span></span></code></pre></div>
<p>Run the ‘evaluate’ function. Look at its arguments in the
documentation for ways to customize the output.</p>
<p>The possible arguments for all functions can be found at the
“Reference” tab at the top of this page or <a href="https://westbrooktm.github.io/GOeval/reference/index.html" class="uri">https://westbrooktm.github.io/GOeval/reference/index.html</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net_1_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evaluate.html">evaluate</a></span><span class="op">(</span><span class="va">network_path</span>, <span class="va">reference_path</span>, <span class="va">out_dir</span>, <span class="va">network_name</span>,</span>
<span>                      <span class="co"># additional arguments allow for output customization</span></span>
<span>                      <span class="co"># for example, permutations = 1 allows a faster run time than the default 3</span></span>
<span>                      <span class="co"># get_annotation_overlap = TRUE causes the computation of the annotation_overlap metric</span></span>
<span>                      permutations <span class="op">=</span> <span class="fl">1</span>, get_annotation_overlap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "network_size = 8"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 8"</span></span>
<span><span class="co">#&gt; [1] "network_size = 8"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 8"</span></span>
<span><span class="co">#&gt; [1] "network_size = 9"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 9"</span></span>
<span><span class="co">#&gt; [1] "network_size = 9"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 9"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span></code></pre></div>
<p>After a couple minutes, the directory at out_dir should contain a
folder of subsets of the original network, a folder that contains the
ORA summaries and sets of target genes, and a .pdf file with plots of
metrics calculated from those summaries. The evaluate function returns
the data used to make the plots as a list of DataFrames.</p>
<p>The run time of the evaluate function changes with the size of the
network and the number of permutations. With larger networks, it may
take up to several hours. It is thus recommended to use a computing
cluster when working with large networks. It is possible to speed up the
process by calling each step manually as shown in the “Advanced usage”
section below and running the webgestalt_network function calls in
parallel.</p>
<p>NOTE: If you try to run the evaluate function again with the same
out_dir and network_name, you must first delete the contents of
“out_dir/<network_name>_summaries/webgestalt_work/“. To avoid having to
do this, simply use a different network_name (or out_dir) for each run
unless you delete/rename the previous output.</network_name></p>
<p>Now, let us compare with a second network. The “small_dto.tsv”
network does not have edge scores, so no network subsets will be
created. Generate the data for this network in a similar way as for the
first one.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net_2_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evaluate.html">evaluate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"small_dto.tsv"</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"h1_k562_overlap_universe.txt"</span><span class="op">)</span>,</span>
<span>                       <span class="va">out_dir</span>,</span>
<span>                       <span class="st">"dto"</span>,</span>
<span>                       permutations <span class="op">=</span> <span class="fl">1</span>, get_annotation_overlap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       <span class="co"># without multiple subsets, the plot would just be one dot</span></span>
<span>                       <span class="co"># so we can tell it not to bother</span></span>
<span>                       plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span>
<span><span class="co">#&gt; [1] "network_size = 10"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 10"</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set main plot titles</span></span>
<span><span class="va">title_text</span> <span class="op">&lt;-</span> <span class="st">"NP3 vs DTO"</span></span>
<span><span class="va">subtitle_text</span> <span class="op">&lt;-</span> <span class="st">"subset for overlapping TFs"</span></span>
<span></span>
<span><span class="co"># perTF controls the x-axis label</span></span>
<span><span class="co"># true only if the network subset sizes were determined by</span></span>
<span> <span class="co"># average number of edges per TF instead of by total number of edges</span></span>
<span><span class="va">perTF</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_metrics.html">plot_metrics</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">net_1_data</span>, <span class="va">net_2_data</span><span class="op">)</span>, <span class="va">title_text</span>, <span class="va">subtitle_text</span>, <span class="va">perTF</span>, annotation_overlap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="GOeval_files/figure-html/unnamed-chunk-9-1.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-9-2.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-9-3.png" width="700"></p>
<p><br><br><br>
Advanced usage:</p>
<p>All intermediary steps in the evaluation can be run separately with
the following functions.</p>
<ol style="list-style-type: decimal">
<li><p>subset_network to create network subsets with the top-weighted
edges</p></li>
<li><p>webgestalt_network on each of the network subsets to generate ORA
results</p></li>
<li><p>get_metrics on the stored ORA results to calculate summary
statistics for plotting</p></li>
<li><p>plot_metrics using the output of get_metrics<br><br><br>
We will now walk through step-by-step evaluation of the network
“np3_dtoTFs.tsv”, which has 56 TFs and a total of 629,832
edges.</p></li>
</ol>
<p>1. subset_network</p>
<p>“np3_dtoTFs.tsv” is tab-separated and contains 3 columns: the TFs,
the regulated genes, and the scores.</p>
<p>This function sorts the input network in descending order by the
values in the third column and creates files in the output_folder with
only the first two columns of the rows that have the highest scores.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">input_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"np3_dtoTFs.tsv"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">output_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>, <span class="st">"np3_dtoTFs_subsets"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"np3"</span></span>
<span>  </span>
<span>  <span class="co"># Since we are setting num_possible_TFs, this will be the average number of</span></span>
<span>  <span class="co">#   edges from each TF in each subset.</span></span>
<span>  <span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">16</span>, <span class="fl">32</span>, <span class="fl">64</span>, <span class="fl">128</span>, <span class="fl">256</span>, <span class="fl">512</span>, <span class="fl">1024</span>, <span class="fl">2048</span>, <span class="fl">4096</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># The "np3_dtoTFs.tsv" network was made to include only 56 TFs.</span></span>
<span>  <span class="va">num_possible_TFs</span> <span class="op">&lt;-</span> <span class="fl">56</span></span>
<span>  </span>
<span>  <span class="fu"><a href="../reference/subset_network.html">subset_network</a></span><span class="op">(</span><span class="va">input_file</span>, <span class="va">output_directory</span>, <span class="va">name</span>, <span class="va">edges</span>, <span class="va">num_possible_TFs</span><span class="op">)</span></span></code></pre></div>
<p>The result is that now the “data/np3_dtoTFs_subsets” folder contains
10 files: “np3_8.tsv” through “np3_4096.tsv”.</p>
<ol start="2" style="list-style-type: decimal">
<li>webgestalt_network</li>
</ol>
<p>Run ORA using the webgestalt_network function on each of the network
subsets created in step 1. These files are tab-separated with the first
column containing the TF names and the second column containing the
regulated gene names. “h1_k562_overlap_universe.txt” contains one column
of the names of all genes that could appear in the network. The
network_name should be different for each subset, so I choose to use the
subset file names without the extension.</p>
<p>Note organism = “hsapiens” and database =
“geneontology_Biological_Process_noRedundant” is the default database
for ORA.</p>
<p>You can see more options for organism and database with
WebGestaltR::listOrganism() and WebGestaltR::listGeneSet()
respectively.</p>
<p>Also note that the run time of the below code could take well over an
hour, so this vignette does not actually evaluate the code. The run time
is highly dependent on the number of subsets, the number of TFs in each
of those subsets, and the number of permutations. The process can be
sped up (in this case by 10x) by running webgestalt_network on each
subset at the same time using a computing cluster or similar.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">subset</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"np3_dtoTFs_subsets"</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/webgestalt_network.html">webgestalt_network</a></span><span class="op">(</span>network_path <span class="op">=</span> <span class="va">subset</span>,</span>
<span>                     reference_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"h1_k562_overlap_universe.txt"</span><span class="op">)</span>,</span>
<span>                     output_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>, <span class="st">"np3_dtoTFs_summaries"</span><span class="op">)</span>,</span>
<span>                     <span class="co"># this just gets the name of each file minus the extension</span></span>
<span>                     network_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">subset</span><span class="op">)</span>, <span class="st">"[.]"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                     permutations <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>To test the very basics on a personal computer, the following code
should run in just a few minutes.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/webgestalt_network.html">webgestalt_network</a></span><span class="op">(</span>network_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"np3_dtoTFs_subsets"</span>, <span class="st">"np3_8.tsv"</span><span class="op">)</span>,</span>
<span>                   reference_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"h1_k562_overlap_universe.txt"</span><span class="op">)</span>,</span>
<span>                   output_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>, <span class="st">"np3_dtoTFs_single_permutation"</span><span class="op">)</span>,</span>
<span>                   network_name <span class="op">=</span> <span class="st">"np3_8"</span>,</span>
<span>                   permutations <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>get_metrics</li>
</ol>
<p>Run get_metrics to calculate the desired metrics based on the output
from webgestalt_network. Note the arguments ‘get_sum’ and ‘get_size’ are
TRUE by default.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># This would normally be in the 'out_dir' directory, but since this data was</span></span>
<span>  <span class="co">#   premade due to time constraints, it is available in 'data_dir'</span></span>
<span>  <span class="va">output_folders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"np3_dtoTFs_summaries"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">metric_dfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metrics.html">get_metrics</a></span><span class="op">(</span><span class="va">output_folders</span>, get_percent <span class="op">=</span> <span class="cn">TRUE</span>, get_mean <span class="op">=</span> <span class="cn">TRUE</span>, get_median <span class="op">=</span> <span class="cn">TRUE</span>, get_annotation_overlap <span class="op">=</span> <span class="cn">TRUE</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "network_size = 16"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 16"</span></span>
<span><span class="co">#&gt; [1] "network_size = 16"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 16"</span></span>
<span><span class="co">#&gt; [1] "network_size = 16"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 16"</span></span>
<span><span class="co">#&gt; [1] "network_size = 16"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 16"</span></span>
<span><span class="co">#&gt; [1] "network_size = 21"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 21"</span></span>
<span><span class="co">#&gt; [1] "network_size = 21"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 21"</span></span>
<span><span class="co">#&gt; [1] "network_size = 21"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 21"</span></span>
<span><span class="co">#&gt; [1] "network_size = 21"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 21"</span></span>
<span><span class="co">#&gt; [1] "network_size = 29"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 29"</span></span>
<span><span class="co">#&gt; [1] "network_size = 29"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 29"</span></span>
<span><span class="co">#&gt; [1] "network_size = 29"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 29"</span></span>
<span><span class="co">#&gt; [1] "network_size = 29"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 29"</span></span>
<span><span class="co">#&gt; [1] "network_size = 40"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 40"</span></span>
<span><span class="co">#&gt; [1] "network_size = 40"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 40"</span></span>
<span><span class="co">#&gt; [1] "network_size = 40"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 40"</span></span>
<span><span class="co">#&gt; [1] "network_size = 40"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 40"</span></span>
<span><span class="co">#&gt; [1] "network_size = 43"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 43"</span></span>
<span><span class="co">#&gt; [1] "network_size = 43"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 43"</span></span>
<span><span class="co">#&gt; [1] "network_size = 43"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 43"</span></span>
<span><span class="co">#&gt; [1] "network_size = 43"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 43"</span></span>
<span><span class="co">#&gt; [1] "network_size = 49"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 49"</span></span>
<span><span class="co">#&gt; [1] "network_size = 49"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 49"</span></span>
<span><span class="co">#&gt; [1] "network_size = 49"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 49"</span></span>
<span><span class="co">#&gt; [1] "network_size = 49"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 49"</span></span>
<span><span class="co">#&gt; [1] "network_size = 52"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 52"</span></span>
<span><span class="co">#&gt; [1] "network_size = 52"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 52"</span></span>
<span><span class="co">#&gt; [1] "network_size = 52"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 52"</span></span>
<span><span class="co">#&gt; [1] "network_size = 52"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 52"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span>
<span><span class="co">#&gt; [1] "network_size = 54"</span></span>
<span><span class="co">#&gt; [1] "length(terms$geneSet) = 54"</span></span></code></pre></div>
<p>If you want to compare multiple networks, you can run get_metrics on
both at the same time as shown below with the addition of the “EDN”
network. When comparing multiple networks, the sizes for all must be
based either on total edges or on edges per TF, but the exact subset
sizes do not need to be the same.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Specify which folders contain the data for each network.</span></span>
<span>  <span class="co"># Each element will be a folder used as the output folder for a call to webgestalt_network.</span></span>
<span>  <span class="co"># Again, these are normally in 'out_dir' but here they are in 'data_dir' for convenience</span></span>
<span>  <span class="va">output_folders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"np3_dtoTFs_summaries"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"EDN_summaries"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">metric_dfs_by_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a></span><span class="op">(</span><span class="va">get_metrics</span>, <span class="va">output_folders</span>, MoreArgs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>get_percent <span class="op">=</span> <span class="cn">TRUE</span>, get_mean <span class="op">=</span> <span class="cn">TRUE</span>, get_median <span class="op">=</span> <span class="cn">TRUE</span>, get_annotation_overlap <span class="op">=</span> <span class="cn">TRUE</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, SIMPLIFY <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>plot_metrics</li>
</ol>
<p>Set a title and subtitle for the plots.<br>
Specify whether the subset sizes are based on total edges or edges per
TF.<br>
Set the metric booleans to the same values as those used in get_metrics
to ensure proper plot labels.<br><br>
plot_metrics also returns a list of the DataFrames used to plot. Each
DataFrame contains values for one metric across all networks, subsets,
and permutations</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Specify the main titles of the output graphs</span></span>
<span>  <span class="va">title_text</span> <span class="op">&lt;-</span> <span class="st">"NP3"</span></span>
<span>  <span class="va">subtitle_text</span> <span class="op">&lt;-</span> <span class="st">"subset for TFs accepted by DTO"</span></span>
<span>  </span>
<span>  <span class="va">perTF</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>  </span>
<span>  <span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_metrics.html">plot_metrics</a></span><span class="op">(</span><span class="va">metric_dfs</span>, <span class="va">title_text</span>, <span class="va">subtitle_text</span>, <span class="va">perTF</span>, percent <span class="op">=</span> <span class="cn">TRUE</span>, mean <span class="op">=</span> <span class="cn">TRUE</span>, median <span class="op">=</span> <span class="cn">TRUE</span>, annotation_overlap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="GOeval_files/figure-html/unnamed-chunk-15-1.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-15-2.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-15-3.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-15-4.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-15-5.png" width="700"><img src="GOeval_files/figure-html/unnamed-chunk-15-6.png" width="700"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Thomas Westbrook.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
